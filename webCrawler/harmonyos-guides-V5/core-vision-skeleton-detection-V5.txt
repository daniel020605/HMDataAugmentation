骨骼点检测
适用场景
人体骨骼关键点检测，主要检测人体的一些关键点，通过关键点描述人体骨骼信息。具体应用主要集中在智能视频监控，病人监护系统，人机交互，虚拟现实，人体动画，智能家居，智能安防，运动员辅助训练等等。
支持17个关键点的识别，具体为鼻子，左右眼，左右耳，左右肩，左右肘、左右手腕、左右髋、左右膝、左右脚踝。
约束与限制
该能力当前不支持模拟器。
开发步骤
在使用骨骼点检测时，将实现骨骼点检测相关的类添加至工程。import { skeletonDetection, visionBase } from '@kit.CoreVisionKit';\nimport { BusinessError } from '@kit.BasicServicesKit'; 简单配置页面的布局，并在Button组件添加点击事件，拉起图库，选择图片。Button('选择图片')\n  .type(ButtonType.Capsule)\n  .fontColor(Color.White)\n  .alignSelf(ItemAlign.Center)\n  .width('80%')\n  .margin(10)\n  .onClick(() => {\n    // 拉起图库，获取图片资源\n    this.selectImage();\n  }) 通过图库获取图片资源，将图片转换为PixelMap。private async selectImage() {\n  let uri = await this.openPhoto()\n  if (uri === undefined) {\n    hilog.error(0x0000, 'skeletonDetectSample', \"Failed to defined uri.\");\n  }\n  this.loadImage(uri)\n}\n\nprivate openPhoto(): Promise<string> {\n  return new Promise<string>((resolve, reject) => {\n    let photoPicker: photoAccessHelper.PhotoViewPicker = new photoAccessHelper.PhotoViewPicker();\n    photoPicker.select({\n      MIMEType: photoAccessHelper.PhotoViewMIMETypes.IMAGE_TYPE, maxSelectNumber: 1\n    }).then(res => {\n      resolve(res.photoUris[0])\n    }).catch((err: BusinessError) => {\n      hilog.error(0x0000, 'skeletonDetectSample', `Failed to get photo image uri. code：${err.code}，message：${err.message}`);\n      reject('')\n    })\n  })\n}\n\nprivate loadImage(name: string) {\n  setTimeout(async () => {\n    let fileSource = await fileIo.open(name, fileIo.OpenMode.READ_ONLY);\n    this.imageSource = image.createImageSource(fileSource.fd);\n    this.chooseImage = await this.imageSource.createPixelMap();\n  }, 100)\n} 实例化Request对象，并传入待检测图片的PixelMap，实现骨骼点检测功能。// 调用骨骼点识别接口\nlet request: visionBase.Request = {\n  inputData: { pixelMap: this.chooseImage }\n};\nlet data: skeletonDetection.SkeletonDetectionResponse = await (await skeletonDetection.SkeletonDetector.create()).process(request); （可选）如果需要将结果展示在界面上，可以用下列代码。let data: skeletonDetection.SkeletonDetectionResponse = await (await skeletonDetection.SkeletonDetector.create()).process(request);\nlet poseJson = JSON.stringify(data);\nhilog.info(0x0000, 'skeletonDetectSample', `Succeeded in face detect：${poseJson}`);\nthis.dataValues = poseJson; 
开发实例
import { image } from '@kit.ImageKit';\nimport { hilog } from '@kit.PerformanceAnalysisKit';\nimport { BusinessError } from '@kit.BasicServicesKit';\nimport { fileIo } from '@kit.CoreFileKit';\nimport { skeletonDetection, visionBase } from '@kit.CoreVisionKit';\nimport { photoAccessHelper } from '@kit.MediaLibraryKit';\n\n@Entry\n@Component\nstruct Index {\n  private imageSource: image.ImageSource | undefined = undefined;\n  @State chooseImage: PixelMap | undefined = undefined\n  @State dataValues: string = ''\n\n  build() {\n    Column() {\n      Image(this.chooseImage)\n        .objectFit(ImageFit.Fill)\n        .height('60%')\n\n      Text(this.dataValues)\n        .copyOption(CopyOptions.LocalDevice)\n        .height('15%')\n        .margin(10)\n        .width('60%')\n\n      Button('选择图片')\n        .type(ButtonType.Capsule)\n        .fontColor(Color.White)\n        .alignSelf(ItemAlign.Center)\n        .width('80%')\n        .margin(10)\n        .onClick(() => {\n          // 拉起图库\n          this.selectImage()\n        })\n\n      Button('开始骨骼点识别')\n        .type(ButtonType.Capsule)\n        .fontColor(Color.White)\n        .alignSelf(ItemAlign.Center)\n        .width('80%')\n        .margin(10)\n        .onClick(async () => {\n          if(!this.chooseImage) {\n            hilog.error(0x0000, 'skeletonDetectSample', `Failed to choose image. chooseImage: ${this.chooseImage}`);\n            return;\n          }\n          // 调用骨骼点识别接口\n          let request: visionBase.Request = {\n            inputData: { pixelMap: this.chooseImage }\n          };\n          let data: skeletonDetection.SkeletonDetectionResponse = await (await skeletonDetection.SkeletonDetector.create()).process(request);\n          let poseJson = JSON.stringify(data);\n          hilog.info(0x0000, 'skeletonDetectSample', `Succeeded in face detect：${poseJson}`);\n          this.dataValues = poseJson;\n        })\n    }\n    .width('100%')\n    .height('100%')\n    .justifyContent(FlexAlign.Center)\n  }\n\n  private async selectImage() {\n    let uri = await this.openPhoto()\n    if (uri === undefined) {\n      hilog.error(0x0000, 'skeletonDetectSample', \"Failed to defined uri.\");\n    }\n    this.loadImage(uri)\n  }\n\n  private openPhoto(): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n      let photoPicker: photoAccessHelper.PhotoViewPicker = new photoAccessHelper.PhotoViewPicker();\n      photoPicker.select({\n        MIMEType: photoAccessHelper.PhotoViewMIMETypes.IMAGE_TYPE, maxSelectNumber: 1\n      }).then(res => {\n        resolve(res.photoUris[0])\n      }).catch((err: BusinessError) => {\n        hilog.error(0x0000, 'skeletonDetectSample', `Failed to get photo image uri. code：${err.code}，message：${err.message}`);\n        reject('')\n      })\n    })\n  }\n\n  private loadImage(name: string) {\n    setTimeout(async () => {\n      let fileSource = await fileIo.open(name, fileIo.OpenMode.READ_ONLY);\n      this.imageSource = image.createImageSource(fileSource.fd);\n      this.chooseImage = await this.imageSource.createPixelMap();\n    }, 100)\n  }\n}
