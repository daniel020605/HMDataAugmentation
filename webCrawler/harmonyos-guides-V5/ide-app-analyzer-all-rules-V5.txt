规则总览
通过AppAnalyzer对应用/元服务进行体检的指导请参考应用与元服务体检。
性能
检测规则
规则详情
权重
应用内点击操作响应快
时间起点：点击离手；
时间终点：界面发生变化；
应用内点击操作响应时延应≤ 100毫秒。
3
应用内点击操作完成快
时间起点：点击离手；
时间终点：转场页面所有占位符加载完成；
应用内点击操作完成时延应≤ 1600毫秒。
3
应用内滑动操作响应快
时间起点：手指滑动；
时间终点：界面发生变化；
应用内滑动操作响应时延应≤ 80毫秒。
3
应用内滑动过程流畅
应用的滑动过程卡顿率≤ 5ms/s；
满帧30FPS的游戏类、地图类和视频类的应用帧率应≥ 29FPS。
3
应用内转场操作流畅
应用内转场过程卡顿率≤ 0ms/s；
滑动过程卡顿率：动效时间内累计丢帧时间/动效时长。
3
应用动态内存峰值占用
应用完成操作后，各类应用在后台的内存占用峰值应≤ 1300MB；
应用完成操作后切换到后，静置3min以后采集内存占用。
后台用户可感知应用不涉及，如导航、音乐播放等。
3
应用前台场景内存峰值占用
应用前台场景峰值内存占用：应用在前台且亮屏使用规程的内存占用应≤ 1500MB。
3
应用后台CPU占用峰值
应用后台CPU占用峰值：应用切换到后台等待3min后，开始采集3min内CPU Load < 5%。
3
图形渲染服务处理节点数小于500
后端Render Server在每帧数据里处理的节点数不应该超过500，否侧会造成CPU使用过高，引发帧时延过高，从而导致丢帧。
1
最佳实践
检测规则
规则详情
权重
避免过大的组件树节点数目
建议一个页面使用少于1000个组件树节点，节点树深度少于30层，子节点数不大于60个。
2
避免执行脚本的耗时过长
脚本执行时间是指JS脚本在一次同步执行中消耗的时间，比如生命周期回调、事件处理函数的同步执行时间。建议单个JS脚本执行周期内运行时间不超过15毫秒。
2
避免渲染界面的耗时过长
建议单次渲染时间不超过500ms。渲染界面的耗时过长会让用户觉得卡顿，体验较差，出现这一情况时，需要校验下是否同时渲染的区域太大；页面中单个组件的渲染时间不超过15ms。
2
ForEach性能检测
ForEach中item数量不要超过50。
2
单帧属性数量更新内容限制
在高帧率场景单帧更新属性数量建议滑动场景不超过300个，非滑动场景不超过1500个。
2
单帧脏组件数量限制
高帧率场景更新组件数量（含布局更新）建议滑动场景不超过30个，非滑动场景单帧更新组件数不超过500个。
2
web组件初始化耗时检测
避免web组件初始化耗时过长。
应用web页面加载场景下，web组件初始化时间不超过25ms。
2
web执行js耗时检测
避免web页面js执行耗时过长。
应用web页面加载场景下，web页面单个js编译时间不超过30ms，单个js运行时间不超过30ms，总体js执行时间不超过300ms。
2
UI线程IO执行耗时长未并行化检测
避免UI线程中执行文件IO耗时过长。
UI主线程中，不应出现执行IO函数超过8.3毫秒，如果出现需要进行IO并行化改造。
2
UI线程耗时操作检测
避免UI线程中的函数耗时过长。
UI主线程中，不应出现函数超过8.3毫秒，如果出现需要进行IO并行化改造。
2
web主资源下载耗时检测
避免web主资源下载耗时过长。
应用web页面加载场景下，web主资源下载时间不超过300ms。
2
web子资源下载耗时检测
避免web子资源下载耗时过长。
应用web页面加载场景下，web单个子资源下载时间不超过200ms。
2
短视频起播时延检测
时间起点：从用户滑动屏幕抬手后；
时间终点：到短视频第二帧画面(非封面帧)；
显示时间≤ 700毫秒。
2
相机拍照完成时延检测
相机从拍照开始到生成可预览照片的完成时延不应超过1000ms。
如果超过，建议使用分段式拍照。
注意：请授予相机的权限。
2
快速性能
检测规则
规则详情
权重
页面内点击操作完成时延快速检测
时间起点：点击离手；
时间终点：转场页面所有占位符加载完成；
应用内点击操作完成时延应≤ 1600毫秒。
3
页面内滑动过程流畅性快速检测
应用的滑动过程卡顿率≤ 5ms/s；
满帧30FPS的游戏类、地图类和视频类的应用帧率应≥ 29FPS。
3
页面转场操作流畅性快速检测
应用的应用内转场过程卡顿率≤ 0ms/s；
滑动过程卡顿率：动效时间内累计丢帧时间/动效时长。
3
页面内节点数超过500过多快速检测
后端Render Server在每帧数据里处理的节点数不应该超过500，否侧会造成CPU使用过高，引发帧时延过高，从而导致丢帧。
1
页面内白块检测
应用内页面检测到白块，需要避免在应用启动进入界面或者快速滑动场景下因数据来不及加载而出现白块。
1
页面内点击操作响应时延快速检测
时间起点：点击离手；
时间终点：界面发生变化；
应用内点击操作响应时延应≤ 100毫秒。
3
页面内滑动响应时延快速检测
时间起点：手指滑动；
时间终点：界面发生变化；
应用内滑动操作响应时延应≤ 80毫秒。
3
避免页面内UI容器组件超出屏幕过多
避免滑动类容器组件区域超出屏幕显示范围10%。
滑动类容器组件的渲染范围与容器大小相同，超出屏幕的不可见部分为冗余渲染。
在页面切换的场景，过多的冗余渲染，可能会让用户觉得页面切换慢，响应不及时。
建议将滑动类容器组件的大小和位置限定在屏幕显示范围内。
如果因为嵌套滚动等效果，必须超出屏幕的，可以考虑使用分帧多次加载数据的方式，优先渲染可见部分，提升页面切换性能。
1
应用冷启动完成时延检测
应用首页铺满全屏并且所有占位符加载完成。
3
兼容性
检测规则
规则详情
权重
应用支持在当前OS版本/设备类型安装
应用在其配置支持运行的对应软件版本/设备类型上成功安装。
5
应用支持在当前OS版本/设备类型启动
应用正常启动，进入应用首界面。
5
应用支持在当前OS版本/设备类型卸载
应用在其配置支持运行的对应软件版本/设备类型上成功卸载，卸载无残留(包括文件、数据和进程)。
4
应用在当前OS版本/设备类型运行稳定
APP要求在其支持的OS版本/设备类型上运行不会出现崩溃、冻屏无响应、无法返回等问题。
3
规格约束
检测规则
规则详情
权重
Entry hap检测
在一个应用包中，同一个设备上必须要有一个Entry hap，且仅有一个；其他的hap为Feature hap，可以有一个或多个，也可以不含Feature hap。
5
包名和版本号一致性
在一个应用包中，所有HAP的配置文件中的bundleName、versionCode标签必须一致。
4
SDK版本检测
APP必须声明其所运行的最小和目标SDK版本号。
3
ReqPermissions权限
在一个应用包中，所有entry和feature hap的ReqPermissions权限必须填写name，除此之外，user_grant权限则必填reason和usedScene字段。
4
设备类型
在一个应用包中，每个hap包必须明确支持的设备类型，不能为空。
5
应用/元服务必须有图标
元服务/应用需要有图标。
5
应用要支持64位so文件
如果APP集成native so，则要求提供64位so。
4
元服务内所有包总和大小不超过10MB
单个元服务内所有包文件（加上其依赖的所有共享包）的大小总和不能超过10MB。
2
元服务单个包文件大小不超过2MB
元服务内单个包文件（加上其依赖的所有共享包），大小不能超过2MB。
2
元服务免安装属性
必须标识当前module是否支持免安装特性，元服务的所有entry、feature、shared包必须配置为免安装。
4
元服务预加载对应模块类型不能为entry
preloads列表配置的moduleName对应的moduleType（模块类型）不能为entry。
4
应用非免安装属性
必须标识当前module是否支持免安装特性，应用的所有entry、feature、shared包必须配置为非免安装或不配置。
2
卡片metadata元信息
卡片metadata元信息标签，其key固定为ohos.extension.form，且value是配置文件的索引。
3
卡片supportDimensions字段
卡片仅支持的外观规格为：1*2,2*2,2*4,4*4。
3
卡片defaultDimension字段
卡片defaultDimension不可缺省，取值必须在supportDimensions配置中。
3
卡片isDefault字段
卡片isDefault不可缺省，每个UIAbility有且只有一个默认卡片。
3
卡片updateEnabled字段
卡片配置文件中的updateEnabled不可缺省，设置为true时必须设置scheduledUpdateTime和updateDuration字段，可以设置其中一个或同时设置两个。
3
卡片description字段
卡片description字段需要用索引方式填写。
4
功耗
检测规则
规则详情
权重
后台进程CPU负载约束（长时任务）
应用或元服务后台CPU运行：后台进程持续10分钟CPU负载不得高于10%；(8核负载，即总负载为80%)。
1
后台进程CPU负载约束（短时任务）
应用或元服务后台CPU运行：后台进程任务期间CPU负载不得高于8%；(8核负载，即总负载为64%)。
1
合理使用蓝牙资源
无长时任务的应用退到后台不允许有蓝牙扫描。
1
合理使用麦克风或者扬声器
无长时任务的应用退后台禁止使用麦克风或扬声器。
1
合理使用GPS资源
无长时任务的应用退后台禁止使用定位服务。
1
合理使用sensor资源
应用退后台禁止使用传感器，前台使用时根据业务尽量使用once()接口监听结果。
1
后台合理使用系统资源
无长时任务的应用退后台对应资源释放，不要直接或者间接持running lock锁。
1
稳定性
检测规则
规则详情
权重
应用崩溃检测
应用或元服务运行过程中无崩溃故障。
2
应用卡死检测
应用或元服务运行过程中无冻屏卡死故障。
4
内存泄漏检测
检测出引起内存泄露的代码，提供代码堆栈日志下载。
4
安全与隐私
检测规则
规则详情
权重
申请权限字段规范
应用（包括应用引用的三方库）所需权限必须在应用的配置文件module.json5中严格按照权限开发指导逐个声明，申请user_grant权限时，必须填写reason字段。
2
应用Ability可见性设置
不对外交互的Ability其exported或visible属性禁止设置为true。
2
应用Ability权限设置
对外交互的Ability应设置合理的访问权限。
2
DataShareExtensionAbility组件权限
DataShareExtensionAbility内接口设置合理的读写访问权限。
2
权限申请最小化原则
权限申请满足最小化原则，禁止申请不必要的、新版本废弃的权限。
2
公共事件接收器权限访问控制
对涉及敏感功能的公共事件进行访问权限控制。
2
应用签名完整性
应用需保证签名完整性。
2
应用签名信息
应用证书所有者的CN、OU、O、C字段不能为空。
2
UX测试
检测规则
规则详情
权重
基础信息
每个原子化服务有独立的图标、名称、描述、快照。基础信息将根据场景在服务中心、系统设置等界面展示。
2
服务卡片定时刷新
服务卡片定时刷新最高频率限定在30分钟1次。
1
卡片背景圆角
禁止自定义卡片背景的圆角。
1
卡片最小字体
卡片内最小字号不小于8vp。
1
卡片内容圆角
卡片内容（组件）圆角请在4vp、8vp、12vp参数中选择。
1
卡片热区大小
卡片热区最短边不得小于32vp。
1
