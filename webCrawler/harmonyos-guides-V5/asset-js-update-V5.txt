更新关键资产(ArkTS)
接口介绍
可通过API文档查看更新关键资产的异步接口update(query: AssetMap, attributesToUpdate: AssetMap)、同步接口updateSync(query: AssetMap, attributesToUpdate: AssetMap)的详细介绍。
在更新关键资产时，关键资产属性的内容（AssetMap）参数如下表所示：
下表中名称包含“DATA_LABEL”的关键资产属性，用于存储业务自定义信息，其内容不会被加密，请勿存放个人数据。
 query的参数列表：     属性名称（Tag） 属性内容（Value） 是否必选 说明    ALIAS 类型为Uint8Array，长度为1-256字节。 必选 关键资产别名，每条关键资产的唯一索引。   ACCESSIBILITY 类型为number，取值范围详见Accessibility。 可选 基于锁屏状态的访问控制。   REQUIRE_PASSWORD_SET 类型为bool。 可选 是否仅在设置了锁屏密码的情况下，可访问关键资产。   AUTH_TYPE 类型为number，取值范围详见AuthType。 可选 访问关键资产所需的用户认证类型。   SYNC_TYPE 类型为number，取值范围详见SyncType。 可选 关键资产支持的同步类型。   IS_PERSISTENT 类型为bool。 可选 在应用卸载时是否需要保留关键资产。   DATA_LABEL_CRITICAL_1 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且有完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_CRITICAL_2 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且有完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_CRITICAL_3 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且有完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_CRITICAL_4 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且有完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_1 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_2 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_3 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_4 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_LOCAL_112+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。   DATA_LABEL_NORMAL_LOCAL_212+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。   DATA_LABEL_NORMAL_LOCAL_312+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。   DATA_LABEL_NORMAL_LOCAL_412+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。    attributesToUpdate的参数列表：     属性名称（Tag） 属性内容（Value） 是否必选 说明    SECRET 类型为Uint8Array，长度为1-1024字节。 可选 关键资产明文。   DATA_LABEL_NORMAL_1 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_2 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_3 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_4 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属信息，内容由业务自定义且无完整性保护。 说明： API12前长度为1-512字节。   DATA_LABEL_NORMAL_LOCAL_112+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。   DATA_LABEL_NORMAL_LOCAL_212+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。   DATA_LABEL_NORMAL_LOCAL_312+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。   DATA_LABEL_NORMAL_LOCAL_412+ 类型为Uint8Array，长度为1-2048字节。 可选 关键资产附属的本地信息，内容由业务自定义且无完整性保护，该项信息不会进行同步。    
代码示例
本模块提供了异步和同步两套接口，以下为异步接口的使用示例，同步接口详见API文档。
更新别名是demo_alias的关键资产，将关键资产明文更新为demo_pwd_new，附属属性更新成demo_label_new。
import { asset } from '@kit.AssetStoreKit';\nimport { util } from '@kit.ArkTS';\nimport { BusinessError } from '@kit.BasicServicesKit';\n\nfunction stringToArray(str: string): Uint8Array {\n  let textEncoder = new util.TextEncoder();\n  return textEncoder.encodeInto(str);\n}\n\nlet query: asset.AssetMap = new Map();\nquery.set(asset.Tag.ALIAS, stringToArray('demo_alias'));\nlet attrsToUpdate: asset.AssetMap = new Map();\nattrsToUpdate.set(asset.Tag.SECRET, stringToArray('demo_pwd_new'));\nattrsToUpdate.set(asset.Tag.DATA_LABEL_NORMAL_1, stringToArray('demo_label_new'));\ntry {\n  asset.update(query, attrsToUpdate).then(() => {\n    console.info(`Asset updated successfully.`);\n  }).catch((err: BusinessError) => {\n    console.error(`Failed to update Asset. Code is ${err.code}, message is ${err.message}`);\n  });\n} catch (error) {\n  let err = error as BusinessError;\n  console.error(`Failed to update Asset. Code is ${err.code}, message is ${err.message}`);\n}
